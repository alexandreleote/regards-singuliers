{% extends 'base.html.twig' %}

{% block title %}Contact - {{ parent() }}{% endblock %}

{% block body %}
    <h2>Contactez-moi</h2>
    
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}

    <p class="contact-intro">Pour toute demande de renseignement ou de devis, n'hésitez pas à me contacter via ce formulaire. Je vous répondrai dans les plus brefs délais.</p>

    <div class="contact-form-container">

        {{ form_start(form, {'attr': {'class': 'contact-form'}}) }}
            <div class="form-type-selector">
                {{ form_row(form.type, {
                    'attr': {
                        'class': 'type-select',
                        'data-controller': 'contact-type'
                    }
                }) }}
            </div>

            {# Champs communs rendus une seule fois #}
            <div id="common-fields" class="form-section">
                {{ form_row(form.civilite, {'attr': {'class': 'form-select'}}) }}
                <div class="form-row">
                    <div class="form-group">{{ form_row(form.prenom, {'attr': {'class': 'form-control'}}) }}</div>
                    <div class="form-group">{{ form_row(form.nom, {'attr': {'class': 'form-control'}}) }}</div>
                </div>
                <div class="form-row">
                    <div class="form-group">{{ form_row(form.email, {'attr': {'class': 'form-control', 'placeholder': 'exemple@email.com'}}) }}</div>
                    <div class="form-group">{{ form_row(form.telephone, {'attr': {'class': 'form-control', 'placeholder': '06 12 34 56 78'}}) }}</div>
                </div>
            </div>

            <div class="form-sections">
                <div class="form-section" data-contact-type-target="particulier" style="display: none;">
                    {# Les champs spécifiques aux particuliers seront déplacés ici via JS #}
                </div>

                <div class="form-section" data-contact-type-target="professionnel" style="display: none;">
                    <div class="form-row">
                        <div class="form-group">{{ form_row(form.entreprise, {'attr': {'class': 'form-control'}}) }}</div>
                        <div class="form-group">{{ form_row(form.localisation, {'attr': {'class': 'form-control'}}) }}</div>
                    </div>
                </div>

                <div class="form-section description-section">
                    {{ form_row(form.description, {
                        'attr': {
                            'class': 'form-control',
                            'rows': 6,
                            'placeholder': 'Décrivez votre projet ou votre demande en quelques lignes...'
                        }
                    }) }}
                </div>
            </div>

            <div class="form-footer">
                <button type="submit" class="contact-form-button">Envoyer ma demande</button>
            </div>
        {{ form_end(form) }}
    </div>

{% endblock %}
